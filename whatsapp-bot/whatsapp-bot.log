[dotenv@17.2.1] injecting env (3) from .env -- tip: ⚙️  enable debug logging with { debug: true }
🚀 WhatsApp bot running on http://0.0.0.0:3000
{"level":30,"time":"2025-08-23T23:11:46.137Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","browser":["LoodgieterApp","Chrome","1.0.0"],"helloMsg":{"clientHello":{"ephemeral":"SQasvAuFu7PqTO67eIHgBnwGzxCwpM1qZLALp2ZZUF0="}},"msg":"connected to WA"}
{"level":30,"time":"2025-08-23T23:11:46.330Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","node":{"username":"32490468009","passive":false,"userAgent":{"platform":"WEB","appVersion":{"primary":2,"secondary":3000,"tertiary":1023223821},"mcc":"000","mnc":"000","osVersion":"0.1","device":"Desktop","osBuildNumber":"0.1","releaseChannel":"RELEASE","localeLanguageIso6391":"en","localeCountryIso31661Alpha2":"US"},"webInfo":{"webSubPlatform":"WEB_BROWSER"},"connectType":"WIFI_UNKNOWN","connectReason":"USER_ACTIVATED","device":11,"pull":true},"msg":"logging in..."}
{"level":30,"time":"2025-08-23T23:11:47.003Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"27 pre-keys found on server"}
{"level":30,"time":"2025-08-23T23:11:47.028Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"handled 0 offline messages/notifications"}
{"level":30,"time":"2025-08-23T23:11:47.186Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"opened connection to WA"}
✅ WhatsApp connected!
📩 From 923471217366@s.whatsapp.net -> start
📤 Laravel response: {
  "type": "text",
  "body": "👋 Hi Tabassum! You're now available to receive job requests.\n\nWhen a customer creates a request near you, you'll receive a notification automatically.\n\nType 'help' for available commands."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> help
📤 Laravel response: {
  "type": "list",
  "title": "Plumber menu",
  "body": "Choose an option:",
  "options": [
    {
      "title": "Plumber Options",
      "rows": [
        {
          "id": "available_on",
          "title": "1. Set availability ON"
        },
        {
          "id": "available_off",
          "title": "2. Set availability OFF"
        },
        {
          "id": "current_request",
          "title": "3. Current request"
        },
        {
          "id": "support",
          "title": "4. Contact support"
        },
        {
          "id": "exit",
          "title": "5. Exit this menu"
        }
      ]
    }
  ]
}
🎯 sendFromPayload called with type: list
📋 Sending list to: 923471217366@s.whatsapp.net
📋 Sent list as text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> 5
📤 Laravel response: {
  "type": "buttons",
  "body": "New request near you: Client: Customer Address: Address not provided, 46000 Rawalpindi Problem: Unknown problem Description: \"No description provided\" Urgency: Normal Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923471217366@s.whatsapp.net
🔘 Button payload: {
  "body": "New request near you: Client: Customer Address: Address not provided, 46000 Rawalpindi Problem: Unknown problem Description: \"No description provided\" Urgency: Normal Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> 1
❌ incoming error {
  message: 'Undefined array key "problem"',
  exception: 'ErrorException',
  file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
  line: 203,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Bootstrap/HandleExceptions.php',
      line: 255,
      function: 'handleError',
      class: 'Illuminate\\Foundation\\Bootstrap\\HandleExceptions',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 203,
      function: '{closure:Illuminate\\Foundation\\Bootstrap\\HandleExceptions::forwardsTo():254}',
      class: 'Illuminate\\Foundation\\Bootstrap\\HandleExceptions',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> 1
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, 1, pending, 20, 5, 4.5, 2025-08-23 23:13:56, 2025-08-23 23:13:56))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 568,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 223,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> 2
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, 2, pending, 20, 5, 4.5, 2025-08-23 23:14:03, 2025-08-23 23:14:03))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 568,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 223,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> hi
📤 Laravel response: {
  "type": "buttons",
  "body": "New request near you: Client: Customer Address: Address not provided, 46000 Rawalpindi Problem: Unknown problem Description: \"No description provided\" Urgency: Normal Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923471217366@s.whatsapp.net
🔘 Button payload: {
  "body": "New request near you: Client: Customer Address: Address not provided, 46000 Rawalpindi Problem: Unknown problem Description: \"No description provided\" Urgency: Normal Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> yes
❌ incoming error {
  message: 'Undefined array key "problem"',
  exception: 'ErrorException',
  file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
  line: 203,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Bootstrap/HandleExceptions.php',
      line: 255,
      function: 'handleError',
      class: 'Illuminate\\Foundation\\Bootstrap\\HandleExceptions',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 203,
      function: '{closure:Illuminate\\Foundation\\Bootstrap\\HandleExceptions::forwardsTo():254}',
      class: 'Illuminate\\Foundation\\Bootstrap\\HandleExceptions',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> 1
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, 1, pending, 20, 5, 4.5, 2025-08-23 23:29:42, 2025-08-23 23:29:42))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 572,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 225,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> 2
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, 2, pending, 20, 5, 4.5, 2025-08-23 23:29:48, 2025-08-23 23:29:48))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 572,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 225,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> exit
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, exit, pending, 20, 5, 4.5, 2025-08-23 23:29:51, 2025-08-23 23:29:51))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 572,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 225,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> no
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, no, pending, 20, 5, 4.5, 2025-08-23 23:29:56, 2025-08-23 23:29:56))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 572,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 225,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
{"level":30,"time":"2025-08-24T00:24:41.018Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","trace":"Error: Connection was lost\n    at Timeout._onTimeout (/Users/macbookpro/Desktop/plumber-platform/whatsapp-bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:308:17)\n    at listOnTimeout (node:internal/timers:608:17)\n    at process.processTimers (node:internal/timers:543:7)","msg":"connection errored"}
❌ Connection closed, reconnecting... Connection was lost
🔄 Reconnect attempt 1/5 in 1000ms
{"level":30,"time":"2025-08-24T00:24:43.047Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","browser":["LoodgieterApp","Chrome","1.0.0"],"helloMsg":{"clientHello":{"ephemeral":"nfhK1CWGd95NGM+q/fBAARvrUnW1hgPm0VMMRyJSrwo="}},"msg":"connected to WA"}
{"level":30,"time":"2025-08-24T00:24:43.292Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","node":{"username":"32490468009","passive":false,"userAgent":{"platform":"WEB","appVersion":{"primary":2,"secondary":3000,"tertiary":1023223821},"mcc":"000","mnc":"000","osVersion":"0.1","device":"Desktop","osBuildNumber":"0.1","releaseChannel":"RELEASE","localeLanguageIso6391":"en","localeCountryIso31661Alpha2":"US"},"webInfo":{"webSubPlatform":"WEB_BROWSER"},"connectType":"WIFI_UNKNOWN","connectReason":"USER_ACTIVATED","device":11,"pull":true},"msg":"logging in..."}
{"level":30,"time":"2025-08-24T00:24:44.082Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"27 pre-keys found on server"}
{"level":30,"time":"2025-08-24T00:24:44.121Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"offline preview received"}
{"level":30,"time":"2025-08-24T00:24:44.131Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"handled 1 offline messages/notifications"}
{"level":30,"time":"2025-08-24T00:24:44.295Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"opened connection to WA"}
✅ WhatsApp connected!
{"level":30,"time":"2025-08-24T00:34:37.885Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","trace":"Error: Connection was lost\n    at Timeout._onTimeout (/Users/macbookpro/Desktop/plumber-platform/whatsapp-bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:308:17)\n    at listOnTimeout (node:internal/timers:608:17)\n    at process.processTimers (node:internal/timers:543:7)","msg":"connection errored"}
❌ Connection closed, reconnecting... Connection was lost
🔄 Reconnect attempt 1/5 in 1000ms
{"level":30,"time":"2025-08-24T00:34:39.372Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","browser":["LoodgieterApp","Chrome","1.0.0"],"helloMsg":{"clientHello":{"ephemeral":"HcLglNI7bQtwEbhOld/NUC1cejtYPznRdn0FwbBtEU0="}},"msg":"connected to WA"}
{"level":30,"time":"2025-08-24T00:34:39.681Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","node":{"username":"32490468009","passive":false,"userAgent":{"platform":"WEB","appVersion":{"primary":2,"secondary":3000,"tertiary":1023223821},"mcc":"000","mnc":"000","osVersion":"0.1","device":"Desktop","osBuildNumber":"0.1","releaseChannel":"RELEASE","localeLanguageIso6391":"en","localeCountryIso31661Alpha2":"US"},"webInfo":{"webSubPlatform":"WEB_BROWSER"},"connectType":"WIFI_UNKNOWN","connectReason":"USER_ACTIVATED","device":11,"pull":true},"msg":"logging in..."}
{"level":30,"time":"2025-08-24T00:34:40.188Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"handled 0 offline messages/notifications"}
{"level":30,"time":"2025-08-24T00:34:40.336Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"27 pre-keys found on server"}
{"level":30,"time":"2025-08-24T00:34:40.602Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"opened connection to WA"}
✅ WhatsApp connected!
{"level":30,"time":"2025-08-24T00:36:49.521Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","trace":"Error: Connection was lost\n    at Timeout._onTimeout (/Users/macbookpro/Desktop/plumber-platform/whatsapp-bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:308:17)\n    at listOnTimeout (node:internal/timers:608:17)\n    at process.processTimers (node:internal/timers:543:7)","msg":"connection errored"}
❌ Connection closed, reconnecting... Connection was lost
🔄 Reconnect attempt 1/5 in 1000ms
{"level":30,"time":"2025-08-24T00:36:51.389Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","browser":["LoodgieterApp","Chrome","1.0.0"],"helloMsg":{"clientHello":{"ephemeral":"JAbZ/gHBnQKe+mqx/gHCDKjMMKH+Qj3/eF7+OC21IHw="}},"msg":"connected to WA"}
{"level":30,"time":"2025-08-24T00:36:51.659Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","node":{"username":"32490468009","passive":false,"userAgent":{"platform":"WEB","appVersion":{"primary":2,"secondary":3000,"tertiary":1023223821},"mcc":"000","mnc":"000","osVersion":"0.1","device":"Desktop","osBuildNumber":"0.1","releaseChannel":"RELEASE","localeLanguageIso6391":"en","localeCountryIso31661Alpha2":"US"},"webInfo":{"webSubPlatform":"WEB_BROWSER"},"connectType":"WIFI_UNKNOWN","connectReason":"USER_ACTIVATED","device":11,"pull":true},"msg":"logging in..."}
{"level":30,"time":"2025-08-24T00:36:52.124Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"handled 0 offline messages/notifications"}
{"level":30,"time":"2025-08-24T00:36:52.297Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"27 pre-keys found on server"}
{"level":30,"time":"2025-08-24T00:36:52.565Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"opened connection to WA"}
✅ WhatsApp connected!
📩 From 923189844731@s.whatsapp.net -> Offers
📤 Laravel response: {
  "type": "text",
  "body": "Plumbers who accepted your job (choose a number to view details):\n\n1) Tabassum • ⭐ 4.5 • 20 min 🚗\n\nType the number to see details, or wait for more options."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "buttons",
  "body": "Do you want to select this plumber?\nName: Tabassum\nFrom: Rawalpindi • ETA: 20 min 🚗 • Distance: 5 km\nRating: ⭐ 4.5\nMessage to you: \"i can be there in 15 minutes. i have all the necessary tools.\"",
  "options": [
    {
      "id": "yes",
      "text": "Yes"
    },
    {
      "id": "no",
      "text": "No"
    },
    {
      "id": "choose_again",
      "text": "Choose again"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Do you want to select this plumber?\nName: Tabassum\nFrom: Rawalpindi • ETA: 20 min 🚗 • Distance: 5 km\nRating: ⭐ 4.5\nMessage to you: \"i can be there in 15 minutes. i have all the necessary tools.\"",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "No"
      },
      "type": 1
    },
    {
      "buttonId": "choose_again",
      "buttonText": {
        "displayText": "Choose again"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Yes
📤 Laravel response: {
  "type": "text",
  "body": "Great! You selected the plumber.\nI'll share your full address and contact info now and notify other plumbers that the job is taken."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> yes
📤 Laravel response: {
  "type": "text",
  "body": "Send your short message (one sentence). Example: \"I can be there in 20 minutes. I have jetting equipment.\""
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> I'll be there in 10 minutes
❌ incoming error {
  message: "SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, i'll be there in 10 minutes, pending, 20, 5, 4.5, 2025-08-24 00:38:12, 2025-08-24 00:38:12))",
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 566,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 215,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> okay
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, okay, pending, 20, 5, 4.5, 2025-08-24 00:38:37, 2025-08-24 00:38:37))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 566,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 215,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923189844731@s.whatsapp.net -> Okay
📤 Laravel response: {
  "type": "text",
  "body": "Confirmed. the plumber is on the way. Address: Address not provided,  Unknown city Problem: Unknown problem Urgency: Normal Your description: \"No description provided\" If you need help, type help."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Okay
📤 Laravel response: {
  "type": "text",
  "body": "Thanks for using our service! Type start to create a new request, or exit to end the session."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> okay
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, okay, pending, 20, 5, 4.5, 2025-08-24 00:39:04, 2025-08-24 00:39:04))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 566,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 215,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> help
📤 Laravel response: {
  "type": "list",
  "title": "Plumber menu",
  "body": "Choose an option:",
  "options": [
    {
      "title": "Plumber Options",
      "rows": [
        {
          "id": "available_on",
          "title": "1. Set availability ON"
        },
        {
          "id": "available_off",
          "title": "2. Set availability OFF"
        },
        {
          "id": "current_request",
          "title": "3. Current request"
        },
        {
          "id": "support",
          "title": "4. Contact support"
        },
        {
          "id": "exit",
          "title": "5. Exit this menu"
        }
      ]
    }
  ]
}
🎯 sendFromPayload called with type: list
📋 Sending list to: 923471217366@s.whatsapp.net
📋 Sent list as text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> exit
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, exit, pending, 20, 5, 4.5, 2025-08-24 00:39:14, 2025-08-24 00:39:14))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 566,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 215,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
📩 From 923471217366@s.whatsapp.net -> 1
❌ incoming error {
  message: 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`plumber_platform`.`wa_offers`, CONSTRAINT `wa_offers_request_id_foreign` FOREIGN KEY (`request_id`) REFERENCES `wa_requests` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `wa_offers` (`plumber_id`, `request_id`, `personal_message`, `status`, `eta_minutes`, `distance_km`, `rating`, `updated_at`, `created_at`) values (6, 1, 1, pending, 20, 5, 4.5, 2025-08-24 00:39:31, 2025-08-24 00:39:31))',
  exception: 'Illuminate\\Database\\QueryException',
  file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
  line: 829,
  trace: [
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Connection.php',
      line: 783,
      function: 'runQueryCallback',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/MySqlConnection.php',
      line: 34,
      function: 'run',
      class: 'Illuminate\\Database\\Connection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Processors/MySqlProcessor.php',
      line: 35,
      function: 'insert',
      class: 'Illuminate\\Database\\MySqlConnection',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php',
      line: 3549,
      function: 'processInsertGetId',
      class: 'Illuminate\\Database\\Query\\Processors\\MySqlProcessor',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1982,
      function: 'insertGetId',
      class: 'Illuminate\\Database\\Query\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1334,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1299,
      function: 'insertAndSetId',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 1138,
      function: 'performInsert',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1025,
      function: 'save',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/helpers.php',
      line: 320,
      function: '{closure:Illuminate\\Database\\Eloquent\\Builder::create():1024}',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php',
      line: 1024,
      function: 'tap'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php',
      line: 23,
      function: 'create',
      class: 'Illuminate\\Database\\Eloquent\\Builder',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2335,
      function: 'forwardCallTo',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php',
      line: 2347,
      function: '__call',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 566,
      function: '__callStatic',
      class: 'Illuminate\\Database\\Eloquent\\Model',
      type: '::'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 215,
      function: 'createOffer',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/app/Http/Controllers/Api/WaRuntimeController.php',
      line: 99,
      function: 'handleDynamicFlow',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Controller.php',
      line: 54,
      function: 'incoming',
      class: 'App\\Http\\Controllers\\Api\\WaRuntimeController',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php',
      line: 43,
      function: 'callAction',
      class: 'Illuminate\\Routing\\Controller',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 259,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\ControllerDispatcher',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Route.php',
      line: 205,
      function: 'runController',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 806,
      function: 'run',
      class: 'Illuminate\\Routing\\Route',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Routing\\Router::runRouteWithinStack():805}',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php',
      line: 50,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\SubstituteBindings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 159,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 125,
      function: 'handleRequest',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php',
      line: 87,
      function: 'handleRequestUsingNamedLimiter',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Routing\\Middleware\\ThrottleRequests',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 805,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 784,
      function: 'runRouteWithinStack',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 748,
      function: 'runRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Routing/Router.php',
      line: 737,
      function: 'dispatchToRoute',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 200,
      function: 'dispatch',
      class: 'Illuminate\\Routing\\Router',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 144,
      function: '{closure:Illuminate\\Foundation\\Http\\Kernel::dispatchToRouter():197}',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():142}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php',
      line: 31,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php',
      line: 21,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php',
      line: 40,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\TrimStrings',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php',
      line: 27,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php',
      line: 99,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php',
      line: 62,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\HandleCors',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php',
      line: 39,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 183,
      function: 'handle',
      class: 'Illuminate\\Http\\Middleware\\TrustProxies',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php',
      line: 119,
      function: '{closure:{closure:Illuminate\\Pipeline\\Pipeline::carry():158}:159}',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 175,
      function: 'then',
      class: 'Illuminate\\Pipeline\\Pipeline',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php',
      line: 144,
      function: 'sendRequestThroughRouter',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/public/index.php',
      line: 51,
      function: 'handle',
      class: 'Illuminate\\Foundation\\Http\\Kernel',
      type: '->'
    },
    {
      file: '/Users/macbookpro/Desktop/plumber-platform/vendor/laravel/framework/src/Illuminate/Foundation/resources/server.php',
      line: 16,
      function: 'require_once'
    }
  ]
}
{"level":30,"time":"2025-08-24T01:12:41.843Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","trace":"Error: Connection was lost\n    at Timeout._onTimeout (/Users/macbookpro/Desktop/plumber-platform/whatsapp-bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:308:17)\n    at listOnTimeout (node:internal/timers:608:17)\n    at process.processTimers (node:internal/timers:543:7)","msg":"connection errored"}
❌ Connection closed, reconnecting... Connection was lost
🔄 Reconnect attempt 1/5 in 1000ms
{"level":30,"time":"2025-08-24T01:12:43.720Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","browser":["LoodgieterApp","Chrome","1.0.0"],"helloMsg":{"clientHello":{"ephemeral":"y+mXyyK7T8uHDTyJlHZvk/bZ8Z5yAZuMGOd2w4tXEm8="}},"msg":"connected to WA"}
{"level":30,"time":"2025-08-24T01:12:44.133Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","node":{"username":"32490468009","passive":false,"userAgent":{"platform":"WEB","appVersion":{"primary":2,"secondary":3000,"tertiary":1023223821},"mcc":"000","mnc":"000","osVersion":"0.1","device":"Desktop","osBuildNumber":"0.1","releaseChannel":"RELEASE","localeLanguageIso6391":"en","localeCountryIso31661Alpha2":"US"},"webInfo":{"webSubPlatform":"WEB_BROWSER"},"connectType":"WIFI_UNKNOWN","connectReason":"USER_ACTIVATED","device":11,"pull":true},"msg":"logging in..."}
{"level":30,"time":"2025-08-24T01:12:44.827Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"handled 0 offline messages/notifications"}
{"level":30,"time":"2025-08-24T01:12:45.001Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"27 pre-keys found on server"}
{"level":30,"time":"2025-08-24T01:12:45.332Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"opened connection to WA"}
✅ WhatsApp connected!
📩 From 923189844731@s.whatsapp.net -> Hi
📤 Laravel response: {
  "type": "buttons",
  "body": "Hi iqra! Do you want plumber service at 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Hi iqra! Do you want plumber service at 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Yes
📤 Laravel response: {
  "type": "buttons",
  "body": "What is the problem?",
  "options": [
    {
      "id": "leak",
      "text": "1) Leak"
    },
    {
      "id": "blockage",
      "text": "2) Blockage / Drain"
    },
    {
      "id": "heating",
      "text": "3) Heating / Boiler"
    },
    {
      "id": "installation",
      "text": "4) Installation / Replacement"
    },
    {
      "id": "other",
      "text": "5) Other"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "What is the problem?",
  "buttons": [
    {
      "buttonId": "leak",
      "buttonText": {
        "displayText": "1) Leak"
      },
      "type": 1
    },
    {
      "buttonId": "blockage",
      "buttonText": {
        "displayText": "2) Blockage / Drain"
      },
      "type": 1
    },
    {
      "buttonId": "heating",
      "buttonText": {
        "displayText": "3) Heating / Boiler"
      },
      "type": 1
    },
    {
      "buttonId": "installation",
      "buttonText": {
        "displayText": "4) Installation / Replacement"
      },
      "type": 1
    },
    {
      "buttonId": "other",
      "buttonText": {
        "displayText": "5) Other"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 2
📤 Laravel response: {
  "type": "buttons",
  "body": "How urgent is it?",
  "options": [
    {
      "id": "high",
      "text": "1) High — max 60 min"
    },
    {
      "id": "normal",
      "text": "2) Normal — max 2 hours"
    },
    {
      "id": "later",
      "text": "3) Later today / schedule"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "How urgent is it?",
  "buttons": [
    {
      "buttonId": "high",
      "buttonText": {
        "displayText": "1) High — max 60 min"
      },
      "type": 1
    },
    {
      "buttonId": "normal",
      "buttonText": {
        "displayText": "2) Normal — max 2 hours"
      },
      "type": 1
    },
    {
      "buttonId": "later",
      "buttonText": {
        "displayText": "3) Later today / schedule"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "text",
  "body": "Please describe the problem in 1–2 sentences. You may add a photo or video."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Blockage
📤 Laravel response: {
  "type": "buttons",
  "body": "Do you want me to send this request to available plumbers near you?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes, send to all available"
    },
    {
      "id": "no",
      "text": "2) No, cancel"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Do you want me to send this request to available plumbers near you?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes, send to all available"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No, cancel"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "text",
  "body": "Got it. I'm notifying nearby plumbers now. You'll receive options as they accept.\nYou can reply help for commands."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> help
📤 Laravel response: {
  "type": "list",
  "title": "Plumber menu",
  "body": "Choose an option:",
  "options": [
    {
      "title": "Plumber Options",
      "rows": [
        {
          "id": "available_on",
          "title": "1. Set availability ON"
        },
        {
          "id": "available_off",
          "title": "2. Set availability OFF"
        },
        {
          "id": "complete",
          "title": "3. Mark job as completed"
        },
        {
          "id": "current_request",
          "title": "4. Current request"
        },
        {
          "id": "support",
          "title": "5. Contact support"
        },
        {
          "id": "exit",
          "title": "6. Exit this menu"
        }
      ]
    }
  ]
}
🎯 sendFromPayload called with type: list
📋 Sending list to: 923471217366@s.whatsapp.net
📋 Sent list as text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> 6
📤 Laravel response: {
  "type": "buttons",
  "body": "New request near you: Client: iqra Address: 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse Problem: Blockage / Drain Description: \"Blockage\" Urgency: High — max 60 min Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923471217366@s.whatsapp.net
🔘 Button payload: {
  "body": "New request near you: Client: iqra Address: 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse Problem: Blockage / Drain Description: \"Blockage\" Urgency: High — max 60 min Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> yes
📤 Laravel response: {
  "type": "text",
  "body": "Send your short message (one sentence). Example: \"I can be there in 20 minutes. I have jetting equipment.\""
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> I'll be there in 10 minutes
📤 Laravel response: {
  "type": "text",
  "body": "Thanks! Your offer has been sent to the client. You'll be notified if they choose you."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Offers
📤 Laravel response: {
  "type": "text",
  "body": "Plumbers who accepted your job (choose a number to view details):\n\n1) Tabassum • ⭐ 4.5 • 20 min 🚗\n2) Ibad • ⭐ 4.5 • 20 min 🚗\n3) Tabassum • ⭐ 4.5 • 20 min 🚗\n\nType the number to see details, or wait for more options."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "buttons",
  "body": "Do you want to select this plumber?\nName: Tabassum\nFrom: Rawalpindi • ETA: 20 min 🚗 • Distance: 5 km\nRating: ⭐ 4.5\nMessage to you: \"i can be there in 15 minutes with all tools\"",
  "options": [
    {
      "id": "yes",
      "text": "Yes"
    },
    {
      "id": "no",
      "text": "No"
    },
    {
      "id": "choose_again",
      "text": "Choose again"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Do you want to select this plumber?\nName: Tabassum\nFrom: Rawalpindi • ETA: 20 min 🚗 • Distance: 5 km\nRating: ⭐ 4.5\nMessage to you: \"i can be there in 15 minutes with all tools\"",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "No"
      },
      "type": 1
    },
    {
      "buttonId": "choose_again",
      "buttonText": {
        "displayText": "Choose again"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Yes
📤 Laravel response: {
  "type": "text",
  "body": "Great! You selected the plumber.\nI'll share your full address and contact info now and notify other plumbers that the job is taken."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> okay
📤 Laravel response: {
  "type": "buttons",
  "body": "New request near you: Client: Customer Address: Address not provided, 46000 Rawalpindi Problem: Unknown problem Description: \"No description provided\" Urgency: Normal Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923471217366@s.whatsapp.net
🔘 Button payload: {
  "body": "New request near you: Client: Customer Address: Address not provided, 46000 Rawalpindi Problem: Unknown problem Description: \"No description provided\" Urgency: Normal Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> yes
📤 Laravel response: {
  "type": "text",
  "body": "Send your short message (one sentence). Example: \"I can be there in 20 minutes. I have jetting equipment.\""
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> okay
📤 Laravel response: {
  "type": "text",
  "body": "Thanks! Your offer has been sent to the client. You'll be notified if they choose you."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Okay
📤 Laravel response: {
  "type": "text",
  "body": "Confirmed. the plumber is on the way. Address: Address not provided,  Unknown city Problem: Unknown problem Urgency: Normal Your description: \"No description provided\" If you need help, type help."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
{"level":30,"time":"2025-08-24T02:02:50.972Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"resyncing regular_low from v2"}
{"level":30,"time":"2025-08-24T02:02:51.354Z","pid":16034,"hostname":"MacBooks-MacBook-Pro.local","class":"baileys","msg":"synced regular_low to v3"}
📩 From 923189844731@s.whatsapp.net -> Hi
📤 Laravel response: {
  "type": "buttons",
  "body": "Hi iqra! Do you want plumber service at 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Hi iqra! Do you want plumber service at 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Yes
📤 Laravel response: {
  "type": "buttons",
  "body": "What is the problem?",
  "options": [
    {
      "id": "leak",
      "text": "1) Leak"
    },
    {
      "id": "blockage",
      "text": "2) Blockage / Drain"
    },
    {
      "id": "heating",
      "text": "3) Heating / Boiler"
    },
    {
      "id": "installation",
      "text": "4) Installation / Replacement"
    },
    {
      "id": "other",
      "text": "5) Other"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "What is the problem?",
  "buttons": [
    {
      "buttonId": "leak",
      "buttonText": {
        "displayText": "1) Leak"
      },
      "type": 1
    },
    {
      "buttonId": "blockage",
      "buttonText": {
        "displayText": "2) Blockage / Drain"
      },
      "type": 1
    },
    {
      "buttonId": "heating",
      "buttonText": {
        "displayText": "3) Heating / Boiler"
      },
      "type": 1
    },
    {
      "buttonId": "installation",
      "buttonText": {
        "displayText": "4) Installation / Replacement"
      },
      "type": 1
    },
    {
      "buttonId": "other",
      "buttonText": {
        "displayText": "5) Other"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "buttons",
  "body": "How urgent is it?",
  "options": [
    {
      "id": "high",
      "text": "1) High — max 60 min"
    },
    {
      "id": "normal",
      "text": "2) Normal — max 2 hours"
    },
    {
      "id": "later",
      "text": "3) Later today / schedule"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "How urgent is it?",
  "buttons": [
    {
      "buttonId": "high",
      "buttonText": {
        "displayText": "1) High — max 60 min"
      },
      "type": 1
    },
    {
      "buttonId": "normal",
      "buttonText": {
        "displayText": "2) Normal — max 2 hours"
      },
      "type": 1
    },
    {
      "buttonId": "later",
      "buttonText": {
        "displayText": "3) Later today / schedule"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 2
📤 Laravel response: {
  "type": "text",
  "body": "Please describe the problem in 1–2 sentences. You may add a photo or video."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Leakage in pipe
📤 Laravel response: {
  "type": "buttons",
  "body": "Do you want me to send this request to available plumbers near you?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes, send to all available"
    },
    {
      "id": "no",
      "text": "2) No, cancel"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Do you want me to send this request to available plumbers near you?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes, send to all available"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No, cancel"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "text",
  "body": "Got it. I'm notifying nearby plumbers now. You'll receive options as they accept.\nYou can reply help for commands."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> help
📤 Laravel response: {
  "type": "list",
  "title": "Plumber menu",
  "body": "Choose an option:",
  "options": [
    {
      "title": "Plumber Options",
      "rows": [
        {
          "id": "available_on",
          "title": "1. Set availability ON"
        },
        {
          "id": "available_off",
          "title": "2. Set availability OFF"
        },
        {
          "id": "complete",
          "title": "3. Mark job as completed"
        },
        {
          "id": "current_request",
          "title": "4. Current request"
        },
        {
          "id": "support",
          "title": "5. Contact support"
        },
        {
          "id": "exit",
          "title": "6. Exit this menu"
        }
      ]
    }
  ]
}
🎯 sendFromPayload called with type: list
📋 Sending list to: 923471217366@s.whatsapp.net
📋 Sent list as text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> 6
📤 Laravel response: {
  "type": "buttons",
  "body": "New request near you: Client: iqra Address: 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse Problem: Leak Description: \"Leakage in pipe\" Urgency: Normal — max 2 hours Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923471217366@s.whatsapp.net
🔘 Button payload: {
  "body": "New request near you: Client: iqra Address: 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse Problem: Leak Description: \"Leakage in pipe\" Urgency: Normal — max 2 hours Distance: 5 km • ETA: 20 min 🚗 Do you want to accept?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923471217366@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Start
📤 Laravel response: {
  "type": "buttons",
  "body": "Hi iqra! Do you want plumber service at 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes"
    },
    {
      "id": "no",
      "text": "2) No"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Hi iqra! Do you want plumber service at 100, 15,17, Antwerpseweg, Beerse, Turnhout, Antwerpen, 2340, België, 2340 Beerse?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Yes
📤 Laravel response: {
  "type": "buttons",
  "body": "What is the problem?",
  "options": [
    {
      "id": "leak",
      "text": "1) Leak"
    },
    {
      "id": "blockage",
      "text": "2) Blockage / Drain"
    },
    {
      "id": "heating",
      "text": "3) Heating / Boiler"
    },
    {
      "id": "installation",
      "text": "4) Installation / Replacement"
    },
    {
      "id": "other",
      "text": "5) Other"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "What is the problem?",
  "buttons": [
    {
      "buttonId": "leak",
      "buttonText": {
        "displayText": "1) Leak"
      },
      "type": 1
    },
    {
      "buttonId": "blockage",
      "buttonText": {
        "displayText": "2) Blockage / Drain"
      },
      "type": 1
    },
    {
      "buttonId": "heating",
      "buttonText": {
        "displayText": "3) Heating / Boiler"
      },
      "type": 1
    },
    {
      "buttonId": "installation",
      "buttonText": {
        "displayText": "4) Installation / Replacement"
      },
      "type": 1
    },
    {
      "buttonId": "other",
      "buttonText": {
        "displayText": "5) Other"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "buttons",
  "body": "How urgent is it?",
  "options": [
    {
      "id": "high",
      "text": "1) High — max 60 min"
    },
    {
      "id": "normal",
      "text": "2) Normal — max 2 hours"
    },
    {
      "id": "later",
      "text": "3) Later today / schedule"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "How urgent is it?",
  "buttons": [
    {
      "buttonId": "high",
      "buttonText": {
        "displayText": "1) High — max 60 min"
      },
      "type": 1
    },
    {
      "buttonId": "normal",
      "buttonText": {
        "displayText": "2) Normal — max 2 hours"
      },
      "type": 1
    },
    {
      "buttonId": "later",
      "buttonText": {
        "displayText": "3) Later today / schedule"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 2
📤 Laravel response: {
  "type": "text",
  "body": "Please describe the problem in 1–2 sentences. You may add a photo or video."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> Leaking tab
📤 Laravel response: {
  "type": "buttons",
  "body": "Do you want me to send this request to available plumbers near you?",
  "options": [
    {
      "id": "yes",
      "text": "1) Yes, send to all available"
    },
    {
      "id": "no",
      "text": "2) No, cancel"
    }
  ]
}
🎯 sendFromPayload called with type: buttons
🔘 Sending buttons to: 923189844731@s.whatsapp.net
🔘 Button payload: {
  "body": "Do you want me to send this request to available plumbers near you?",
  "buttons": [
    {
      "buttonId": "yes",
      "buttonText": {
        "displayText": "1) Yes, send to all available"
      },
      "type": 1
    },
    {
      "buttonId": "no",
      "buttonText": {
        "displayText": "2) No, cancel"
      },
      "type": 1
    }
  ]
}
📝 Sent text message with options to: 923189844731@s.whatsapp.net
📩 From 923189844731@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "text",
  "body": "Got it. I'm notifying nearby plumbers now. You'll receive options as they accept.\nYou can reply help for commands."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923189844731@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> help
📤 Laravel response: {
  "type": "list",
  "title": "Plumber menu",
  "body": "Choose an option:",
  "options": [
    {
      "title": "Plumber Options",
      "rows": [
        {
          "id": "available_on",
          "title": "1. Set availability ON"
        },
        {
          "id": "available_off",
          "title": "2. Set availability OFF"
        },
        {
          "id": "complete",
          "title": "3. Mark job as completed"
        },
        {
          "id": "current_request",
          "title": "4. Current request"
        },
        {
          "id": "support",
          "title": "5. Contact support"
        },
        {
          "id": "exit",
          "title": "6. Exit this menu"
        }
      ]
    }
  ]
}
🎯 sendFromPayload called with type: list
📋 Sending list to: 923471217366@s.whatsapp.net
📋 Sent list as text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> 6
📤 Laravel response: {
  "type": "text",
  "body": "Menu closed. Type 'help' to open the menu again or 'start' to begin a new request."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> start
📤 Laravel response: {
  "type": "text",
  "body": "👋 Hi Tabassum! You're now available to receive job requests.\n\nWhen a customer creates a request near you, you'll receive a notification automatically.\n\nType 'help' for available commands."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> help
📤 Laravel response: {
  "type": "list",
  "title": "Plumber menu",
  "body": "Choose an option:",
  "options": [
    {
      "title": "Plumber Options",
      "rows": [
        {
          "id": "available_on",
          "title": "1. Set availability ON"
        },
        {
          "id": "available_off",
          "title": "2. Set availability OFF"
        },
        {
          "id": "complete",
          "title": "3. Mark job as completed"
        },
        {
          "id": "current_request",
          "title": "4. Current request"
        },
        {
          "id": "support",
          "title": "5. Contact support"
        },
        {
          "id": "exit",
          "title": "6. Exit this menu"
        }
      ]
    }
  ]
}
🎯 sendFromPayload called with type: list
📋 Sending list to: 923471217366@s.whatsapp.net
📋 Sent list as text to: 923471217366@s.whatsapp.net
📩 From 923471217366@s.whatsapp.net -> 1
📤 Laravel response: {
  "type": "text",
  "body": "✅ You are now available to receive job requests.\n\nYou'll be notified when new jobs are available in your area."
}
🎯 sendFromPayload called with type: text
📝 Sending text to: 923471217366@s.whatsapp.net
